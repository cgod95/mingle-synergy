import React, { useMemo, useState } from "react";
import { saveProfile, setCheckIn, getProfile, getCheckIn } from "../lib/profileStore";
import { getAllVenues } from "../lib/demoVenues"; // must exist in your project

export default function CheckIn() {
  const venues = getAllVenues();
  const current = getCheckIn() || "";
  const onChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
    const v = e.target.value || null;
    setCheckIn(v);
    alert(v ? "Checked in!" : "Checked out.");
  };
  return (
    <main style={{ padding: 24, maxWidth: 720, margin: "0 auto" }}>
      <h1 style={{ marginBottom: 12 }}>Check in (demo)</h1>
      <label style={{ display: "block", marginBottom: 8 }}>Choose a venue:</label>
      <select value={current} onChange={onChange} style={{ padding: 8, borderRadius: 8, border: "1px solid #e5e7eb" }}>
        <option value="">— Not checked in —</option>
        {venues.map((v: any) => (
          <option key={String(v.id)} value={String(v.id)}>{v.name ?? v.title ?? v.id}</option>
        ))}
      </select>
      <div style={{ marginTop: 10, fontSize: 12, color: "#666" }}>
        Current: {current || "—"}
      </div>
    </main>
  );
}
